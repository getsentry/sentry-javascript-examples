[
  {
    "event_id": "[[ID1]]",
    "sent_at": "[[ISODateString]]",
    "sdk": {
      "name": "sentry.javascript.node",
      "version": "7.110.1"
    },
    "dsn": "[[dsn]]",
    "trace": {
      "environment": "qa",
      "public_key": "[[publicKey]]",
      "trace_id": "[[ID2]]",
      "sample_rate": "1",
      "transaction": "GET /test-error-manual",
      "sampled": "true"
    }
  },
  {
    "type": "event"
  },
  {
    "exception": {
      "values": [
        {
          "type": "Error",
          "value": "This is an error",
          "stacktrace": {
            "frames": [
              {
                "filename": "[[FILENAME1]]",
                "module": "@sentry.node.cjs.async:hooks",
                "function": "Object.runWithAsyncContext",
                "lineno": 45,
                "colno": 25,
                "in_app": false,
                "pre_context": [
                  "      // We're already in an async context, so we don't need to create a new one",
                  "      // just call the callback with the current hub",
                  "      return callback();",
                  "    }",
                  "",
                  "    const newHub = createNewHub(existingHub);",
                  ""
                ],
                "context_line": "    return asyncStorage.run(newHub, () => {",
                "post_context": [
                  "      return callback();",
                  "    });",
                  "  }",
                  "",
                  "  core.setAsyncContextStrategy({ getCurrentHub, runWithAsyncContext });",
                  "}",
                  ""
                ]
              },
              {
                "filename": "[[FILENAME2]]",
                "module": "node:async_hooks",
                "function": "AsyncLocalStorage.run",
                "lineno": 346,
                "colno": 14,
                "in_app": false
              },
              {
                "filename": "[[FILENAME1]]",
                "module": "@sentry.node.cjs.async:hooks",
                "function": "<anonymous>",
                "lineno": 46,
                "colno": 14,
                "in_app": false,
                "pre_context": [
                  "      // just call the callback with the current hub",
                  "      return callback();",
                  "    }",
                  "",
                  "    const newHub = createNewHub(existingHub);",
                  "",
                  "    return asyncStorage.run(newHub, () => {"
                ],
                "context_line": "      return callback();",
                "post_context": [
                  "    });",
                  "  }",
                  "",
                  "  core.setAsyncContextStrategy({ getCurrentHub, runWithAsyncContext });",
                  "}",
                  "",
                  "exports.setHooksAsyncContextStrategy = setHooksAsyncContextStrategy;"
                ]
              },
              {
                "filename": "[[FILENAME3]]",
                "module": "@sentry.core.cjs.tracing:trace",
                "function": "<anonymous>",
                "lineno": 83,
                "colno": 22,
                "in_app": false,
                "pre_context": [
                  " * or you didn't set `tracesSampleRate`, this function will not generate spans",
                  " * and the `span` returned from the callback will be undefined.",
                  " */",
                  "function startSpan(context, callback) {",
                  "  const spanContext = normalizeContext(context);",
                  "",
                  "  return hub.runWithAsyncContext(() => {"
                ],
                "context_line": "    return exports$1.withScope(context.scope, scope => {",
                "post_context": [
                  "      // eslint-disable-next-line deprecation/deprecation",
                  "      const hub$1 = hub.getCurrentHub();",
                  "      // eslint-disable-next-line deprecation/deprecation",
                  "      const parentSpan = scope.getSpan();",
                  "",
                  "      const shouldSkipSpan = context.onlyIfParent && !parentSpan;",
                  "      const activeSpan = shouldSkipSpan"
                ]
              },
              {
                "filename": "[[FILENAME4]]",
                "module": "@sentry.core.cjs:exports",
                "function": "Object.withScope",
                "lineno": 177,
                "colno": 20,
                "in_app": false,
                "pre_context": [
                  "  const hub$1 = hub.getCurrentHub();",
                  "",
                  "  // If a scope is defined, we want to make this the active scope instead of the default one",
                  "  if (rest.length === 2) {",
                  "    const [scope, callback] = rest;",
                  "    if (!scope) {",
                  "      // eslint-disable-next-line deprecation/deprecation"
                ],
                "context_line": "      return hub$1.withScope(callback);",
                "post_context": [
                  "    }",
                  "",
                  "    // eslint-disable-next-line deprecation/deprecation",
                  "    return hub$1.withScope(() => {",
                  "      // eslint-disable-next-line deprecation/deprecation",
                  "      hub$1.getStackTop().scope = scope ;",
                  "      return callback(scope );"
                ]
              },
              {
                "filename": "[[FILENAME5]]",
                "module": "@sentry.core.cjs:hub",
                "function": "Hub.withScope",
                "lineno": 194,
                "colno": 28,
                "in_app": false,
                "pre_context": [
                  "   */",
                  "   withScope(callback) {",
                  "    // eslint-disable-next-line deprecation/deprecation",
                  "    const scope = this.pushScope();",
                  "",
                  "    let maybePromiseResult;",
                  "    try {"
                ],
                "context_line": "      maybePromiseResult = callback(scope);",
                "post_context": [
                  "    } catch (e) {",
                  "      // eslint-disable-next-line deprecation/deprecation",
                  "      this.popScope();",
                  "      throw e;",
                  "    }",
                  "",
                  "    if (utils.isThenable(maybePromiseResult)) {"
                ]
              },
              {
                "filename": "[[FILENAME3]]",
                "module": "@sentry.core.cjs.tracing:trace",
                "function": "<anonymous>",
                "lineno": 99,
                "colno": 35,
                "in_app": false,
                "pre_context": [
                  "        : createChildSpanOrTransaction(hub$1, {",
                  "            parentSpan,",
                  "            spanContext,",
                  "            forceTransaction: context.forceTransaction,",
                  "            scope,",
                  "          });",
                  ""
                ],
                "context_line": "      return handleCallbackErrors.handleCallbackErrors(",
                "post_context": [
                  "        () => callback(activeSpan),",
                  "        () => {",
                  "          // Only update the span status if it hasn't been changed yet",
                  "          if (activeSpan) {",
                  "            const { status } = spanUtils.spanToJSON(activeSpan);",
                  "            if (!status || status === 'ok') {",
                  "              activeSpan.setStatus('internal_error');"
                ]
              },
              {
                "filename": "[[FILENAME6]]",
                "module": "@sentry.core.cjs.utils:handleCallbackErrors",
                "function": "Object.handleCallbackErrors",
                "lineno": 26,
                "colno": 26,
                "in_app": false,
                "pre_context": [
                  "  fn,",
                  "  onError,",
                  "  // eslint-disable-next-line @typescript-eslint/no-empty-function",
                  "  onFinally = () => {},",
                  ") {",
                  "  let maybePromiseResult;",
                  "  try {"
                ],
                "context_line": "    maybePromiseResult = fn();",
                "post_context": [
                  "  } catch (e) {",
                  "    onError(e);",
                  "    onFinally();",
                  "    throw e;",
                  "  }",
                  "",
                  "  return maybeHandlePromiseRejection(maybePromiseResult, onError, onFinally);"
                ]
              },
              {
                "filename": "[[FILENAME3]]",
                "module": "@sentry.core.cjs.tracing:trace",
                "function": "handleCallbackErrors.handleCallbackErrors.status.status",
                "lineno": 100,
                "colno": 15,
                "in_app": false,
                "pre_context": [
                  "            parentSpan,",
                  "            spanContext,",
                  "            forceTransaction: context.forceTransaction,",
                  "            scope,",
                  "          });",
                  "",
                  "      return handleCallbackErrors.handleCallbackErrors("
                ],
                "context_line": "        () => callback(activeSpan),",
                "post_context": [
                  "        () => {",
                  "          // Only update the span status if it hasn't been changed yet",
                  "          if (activeSpan) {",
                  "            const { status } = spanUtils.spanToJSON(activeSpan);",
                  "            if (!status || status === 'ok') {",
                  "              activeSpan.setStatus('internal_error');",
                  "            }"
                ]
              },
              {
                "filename": "[[FILENAME7]]",
                "module": "app",
                "function": "<anonymous>",
                "lineno": 149,
                "colno": 53,
                "in_app": true,
                "pre_context": [
                  "app.get('/test-error-manual', function (req, res) {",
                  "    return __awaiter(this, void 0, void 0, function () {",
                  "        return __generator(this, function (_a) {",
                  "            switch (_a.label) {",
                  "                case 0:",
                  "                    Sentry.startSpan({ name: 'test-span' }, function () {",
                  "                        Sentry.startSpan({ name: 'child-span' }, function () {"
                ],
                "context_line": "                            Sentry.captureException(new Error('This is an error'));",
                "post_context": [
                  "                        });",
                  "                    });",
                  "                    return [4 /*yield*/, Sentry.flush(2000)];",
                  "                case 1:",
                  "                    _a.sent();",
                  "                    res.send({",
                  "                        transactionIds: global.transactionIds || [],"
                ]
              }
            ]
          },
          "mechanism": {
            "type": "generic",
            "handled": true
          }
        }
      ]
    },
    "event_id": "[[ID1]]",
    "platform": "node",
    "contexts": {
      "trace": {
        "data": {
          "sentry.origin": "manual"
        },
        "parent_span_id": "[[ID3]]",
        "span_id": "[[ID4]]",
        "trace_id": "[[ID2]]",
        "origin": "manual"
      },
      "runtime": {
        "name": "node",
        "version": "v20.12.1"
      },
      "app": {
        "app_start_time": "[[ISODateString]]",
        "app_memory": "[[highNumber]]"
      },
      "os": {
        "kernel_version": "23.2.0",
        "name": "macOS",
        "version": "14.2",
        "build": "23C64"
      },
      "device": {
        "boot_time": "[[ISODateString]]",
        "arch": "arm64",
        "memory_size": "[[highNumber]]",
        "free_memory": "[[highNumber]]",
        "processor_count": 10,
        "cpu_description": "Apple M1 Pro",
        "processor_frequency": "[[highNumber]]"
      },
      "culture": {
        "locale": "en-US",
        "timezone": "Europe/Vienna"
      },
      "cloud_resource": {}
    },
    "server_name": "D9M3PY4LQ7.local",
    "timestamp": "[[timestamp]]",
    "environment": "qa",
    "sdk": {
      "integrations": [
        "InboundFilters",
        "FunctionToString",
        "LinkedErrors",
        "RequestData",
        "Console",
        "Http",
        "Undici",
        "OnUncaughtException",
        "OnUnhandledRejection",
        "ContextLines",
        "LocalVariables",
        "Context",
        "Modules"
      ],
      "name": "sentry.javascript.node",
      "version": "7.110.1",
      "packages": [
        {
          "name": "npm:@sentry/node",
          "version": "7.110.1"
        }
      ]
    },
    "tags": {
      "transaction": "GET /test-error-manual"
    },
    "modules": {
      "fastify": "4.26.2",
      "avvio": "8.3.0",
      "fastq": "1.17.1",
      "reusify": "1.0.4",
      "process-warning": "3.0.0",
      "abstract-logging": "2.0.1",
      "pino": "8.20.0",
      "pino-std-serializers": "6.2.2",
      "fast-redact": "3.5.0",
      "quick-format-unescaped": "4.0.4",
      "sonic-boom": "3.8.1",
      "atomic-sleep": "1.0.0",
      "on-exit-leak-free": "2.1.2",
      "thread-stream": "2.4.1",
      "safe-stable-stringify": "2.4.3",
      "rfdc": "1.3.1",
      "fast-json-stringify": "5.14.1",
      "ajv": "8.12.0",
      "fast-deep-equal": "3.1.3",
      "uri-js": "4.4.1",
      "fast-uri": "2.3.0",
      "proxy-addr": "2.0.7",
      "forwarded": "0.2.0",
      "ipaddr.js": "1.9.1",
      "semver": "7.6.0",
      "yallist": "4.0.0",
      "toad-cache": "3.7.0",
      "fast-content-type-parse": "1.1.0",
      "secure-json-parse": "2.7.0",
      "json-schema-ref-resolver": "1.0.1",
      "find-my-way": "8.1.0",
      "fast-querystring": "1.1.2",
      "fast-decode-uri-component": "1.0.1",
      "safe-regex2": "2.0.0",
      "ret": "0.2.2"
    }
  }
]
